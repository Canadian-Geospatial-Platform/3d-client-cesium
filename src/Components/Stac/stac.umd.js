(function(z,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("solid-js/web"),require("solid-js")):typeof define=="function"&&define.amd?define(["exports","solid-js/web","solid-js"],e):(z=typeof globalThis<"u"?globalThis:z||self,e(z.Stac={},z.SolidJSWeb,z.SolidJS))})(this,function(z,e,i){"use strict";const me=i.createContext(void 0);function _e(){const[l,t]=i.createSignal([]),[n,a]=i.createSignal(null);return{collections:l,setCollections:t,setCallback:a,callback:n}}const ye=l=>{const{collections:t,setCollections:n,callback:a,setCallback:r}=_e(),{bboxSignal:o,intersectsSignal:u,datetimeSignal:s}=l,[c,f]=o,[d,v]=u,[y,$]=s;return e.createComponent(me.Provider,{value:{collections:t,setCollections:n,callback:a,setCallback:r,bbox:c,setBbox:f,intersects:d,setIntersects:v,datetime:y,setDatetime:$},get children(){return l.children}})},le=()=>{const l=i.useContext(me);if(!l)throw new Error("useStacContext must be used within a StateContextProvider");return l};async function xe(l){return(await(await fetch(l+"/")).json()).id}async function Pe(l){const{setCollections:t}=le(),o=(await(await fetch(l+"/collections")).json()).collections;return t(o),o}async function ke(l){return(await(await fetch(l)).json()).features}function h(){if(localStorage.getItem("userLanguage")=="en"||localStorage.getItem("userLanguage")==null)return!0}function ge(){return h()?"Search":"FR_Search"}function Re(){return h()?"Collections":"FR_Collections"}function Te(){return h()?"Back":"FR_Back"}function Ie(){return h()?"Keywords: ":"FR_Keywords: "}function Fe(){return h()?"Getting STAC Catalog":"FR_Getting STAC Catalog"}function Le(){return h()?"License: ":"FR_License: "}function Ae(){return h()?"Select Asset":"FR_Select Asset"}function Ee(){return h()?"Add To Map":"FR_Add To Map"}function Oe(){return h()?"Select Collections. (Leave blank for all)":"FR_Select Collections. (Leave blank for all)"}function Ve(){return h()?"Select Limit":"FR_Select Limit"}function De(){return h()?"Add Item Ids":"FR_Add Item Ids"}function Ne(){return h()?"Searching":"FR_Searching"}function je(){return h()?"Error Searching STAC":"FR_Error Searching STAC"}function Be(){return h()?"Clear":"FR_Clear"}function Me(){return h()?"Previous Page":"FR_Previous Page"}function Ge(){return h()?"Next Page":"FR_Next Page"}function qe(){return h()?"Returned: ":"FR_Returned: "}function ze(){return h()?"Limit: ":"FR_Limit: "}function He(){return h()?"Matched: ":"FR_Matched: "}function ue(){return h()?"Not Listed":"FR_Not Listed"}function Ke(){return h()?"Thumbnail":"FR_Thumbnail"}function Ue(){return h()?"No Thumbnail":"FR_No Thumbnail"}function de(){return h()?"ID: ":"FR_ID: "}function We(){return h()?"Bounding Box: ":"FR_Bounding Box: "}function Ze(){return h()?"Date/Time: ":"FR_Date/Time: "}function Qe(){return h()?"Creation Date: ":"FR_Creation Date: "}function he(){return h()?"Intersects...":"FR_Intersects..."}function Xe(){return h()?"None":"FR_None"}function Ye(){return h()?"Point":"FR_Point"}function be(){return h()?"Polygon":"FR_Polygon"}function Je(){return h()?"Latitude: ":"FR_Latitude: "}function we(){return h()?"Longitude: ":"FR_Longitude: "}function et(){return h()?"Add Vertex":"FR_AddVertex"}function tt(){return h()?"Current Intersects: ":"FR_Current Intersects: "}function nt(){return h()?"Custom":"FR_Custom"}function rt(){return h()?"Custom GeoJson Expression":"FR_Custom GeoJson Expression"}var lt=e.template("<nav class=StacScroll>"),at=e.template("<p>Getting STAC Response"),it=e.template("<div class=StacCollectionCard><h2></h2><p>"),ot=e.template("<nav class=collectionPageScroll>"),ct=e.template("<div class=collectionPage-hidden><div class=collectionPageInfo><div class=collectionPageInfoTopDiv><button><span class></span></button> <p></p></div><h3></h3><p class=collectionPageDescription></p><div class=collectionPageInfoBottomDiv><p class=collectionPageInfoBottomKeywordsLabel> </p><p></p><p class=collectionPageInfoBottomLicenseLabel>"),st=e.template("<p>Getting Items"),ut=e.template("<div class=StacItems>");function dt(l){const{url:t}=l,[n,a]=i.createSignal(!1),[r,o]=i.createSignal(null),[u]=i.createResource(()=>t,Pe);let s,c;return i.createEffect(()=>{n()&&s&&c?(s.classList.remove("collectionPage-hidden"),s.classList.add("collectionPage"),c.classList.remove("StacScroll"),c.classList.add("StacScroll-hidden"),s.focus()):s&&c&&(s.classList.remove("collectionPage"),s.classList.add("collectionPage-hidden"),c.classList.remove("StacScroll-hidden"),c.classList.add("StacScroll"),s.focus())}),[e.createComponent(i.Suspense,{get fallback(){return at()},get children(){var f=lt(),d=c;return typeof d=="function"?e.use(d,f):c=f,e.insert(f,e.createComponent(i.For,{get each(){return u()},children:v=>e.createComponent(ft,{collection:v,setIsCollectionPage:a,setCollectionPage:o})})),f}}),e.createComponent(i.Switch,{get children(){return e.createComponent(i.Match,{get when(){return n()},get children(){return e.createComponent(pt,{ref(f){var d=s;typeof d=="function"?d(f):s=f},get collection(){return r()},setCollectionPage:o,setIsCollectionPage:a})}})}})]}function ft(l){const{collection:t,setIsCollectionPage:n,setCollectionPage:a}=l;function r(){a(t),n(!0)}return(()=>{var o=it(),u=o.firstChild,s=u.nextSibling;return u.$$click=r,e.insert(u,()=>t.title),e.insert(s,()=>`${de()}${t.id}`),o})()}function pt(l){const{collection:t,setCollectionPage:n,setIsCollectionPage:a,ref:r}=l;return(()=>{var o=ct(),u=o.firstChild,s=u.firstChild,c=s.firstChild,f=c.firstChild,d=c.nextSibling,v=d.nextSibling,y=s.nextSibling,$=y.nextSibling,C=$.nextSibling,m=C.firstChild;m.firstChild;var _=m.nextSibling,T=_.nextSibling;return e.use(r,o),c.$$click=()=>{n(null),a(!1)},e.insert(f,Te),e.insert(v,()=>`${de()}${t?t.id:""}`),e.insert(y,()=>t?t.title:""),e.insert($,()=>t?t.description:""),e.insert(m,()=>`${Ie()}${t?t.keywords?.join(", "):""}`,null),e.insert(T,()=>`${Le()}${t&&t.license}`),e.insert(o,e.createComponent(i.Suspense,{get fallback(){return st()},get children(){var S=ot();return e.insert(S,(()=>{var k=e.memo(()=>!!t?.links.find(L=>L.rel==="items"));return()=>k()?e.createComponent(mt,{get url(){return t.links.find(L=>L.rel==="items").href}}):null})()),S}}),null),e.effect(S=>{var k=t?t.keywords?.join(", "):"",L=t?t.license:"";return k!==S.e&&e.setAttribute(m,"title",S.e=k),L!==S.t&&e.setAttribute(T,"title",S.t=L),S},{e:void 0,t:void 0}),o})()}function mt(l){const{url:t}=l,[n]=i.createResource(()=>t,ke);return(()=>{var a=ut();return e.insert(a,e.createComponent(i.For,{get each(){return n()},children:r=>e.createComponent(Ce,{feature:r})})),a})()}e.delegateEvents(["click"]);var gt=e.template("<mark>"),ht=e.template("<div>"),vt=e.template("<div class=solid-select-control>"),St=e.template("<div class=solid-select-placeholder>"),Ct=e.template("<div class=solid-select-single-value>"),$t=e.template("<div class=solid-select-multi-value><span></span><button type=button class=solid-select-multi-value-remove>тип"),_t=e.template("<input class=solid-select-input type=text tabindex=0 autocomplete=off autocapitalize=none autocorrect=off size=1>"),yt=e.template("<div class=solid-select-list>"),ve=e.template("<div class=solid-select-list-placeholder>"),xt=e.template("<div class=solid-select-option>"),Pt=l=>{const t=i.mergeProps({multiple:!1,disabled:!1,optionToValue:p=>p,isOptionDisabled:p=>!1},l),n=p=>{if(t.multiple&&Array.isArray(p))return p;if(!t.multiple&&!Array.isArray(p))return p!==null?[p]:[];throw new Error(`Incompatible value type for ${t.multiple?"multple":"single"} select.`)},[a,r]=i.createSignal(t.initialValue!==void 0?n(t.initialValue):[]),o=()=>t.multiple?a():a()[0]||null,u=p=>r(n(p)),s=()=>r([]),c=()=>!!(t.multiple?o().length:o());i.createEffect(i.on(a,()=>t.onChange?.(o()),{defer:!0}));const[f,d]=i.createSignal(""),v=()=>d(""),y=()=>!!f().length;i.createEffect(i.on(f,p=>t.onInput?.(p),{defer:!0})),i.createEffect(i.on(f,p=>{p&&!S()&&k(!0)},{defer:!0}));const $=typeof t.options=="function"?i.createMemo(()=>t.options(f()),t.options(f())):()=>t.options,C=()=>$().length,m=p=>{if(t.isOptionDisabled(p))return;const V=t.optionToValue(p);t.multiple?u([...a(),V]):(u(V),T(!1)),k(!1)},[_,T]=i.createSignal(!1),[S,k]=i.createSignal(!1),L=()=>k(!S()),[E,M]=i.createSignal(-1),A=()=>$()[E()],Q=p=>p===A(),H=p=>{C()||M(-1);const V=C()-1,w=p==="next"?1:-1;let j=E()+w;j>V&&(j=0),j<0&&(j=V),M(j)},R=()=>H("previous"),K=()=>H("next");i.createEffect(i.on($,p=>{S()&&M(Math.min(0,p.length-1))},{defer:!0})),i.createEffect(i.on(()=>t.disabled,p=>{p&&S()&&k(!1)})),i.createEffect(i.on(S,p=>{p?(E()===-1&&K(),T(!0)):(E()>-1&&M(-1),d(""))},{defer:!0})),i.createEffect(i.on(E,p=>{p>-1&&!S()&&k(!0)},{defer:!0}));const J=()=>T(!0),x=()=>{T(!1),k(!1)},O=p=>p.preventDefault(),G=p=>{!t.disabled&&!y()&&L()},q=p=>{d(p.target.value)},N=p=>{switch(p.key){case"ArrowDown":K();break;case"ArrowUp":R();break;case"Enter":if(S()&&A()){m(A());break}return;case"Escape":if(S()){k(!1);break}return;case"Delete":case"Backspace":if(f())return;if(t.multiple){const V=o();u([...V.slice(0,-1)])}else s();break;case" ":if(f())return;S()?A()&&m(A()):k(!0);break;case"Tab":if(A()&&S()){m(A());break}return;default:return}p.preventDefault(),p.stopPropagation()};return{options:$,value:o,setValue:u,hasValue:c,clearValue:s,inputValue:f,setInputValue:d,hasInputValue:y,clearInputValue:v,isOpen:S,setIsOpen:k,toggleOpen:L,isActive:_,setIsActive:T,get multiple(){return t.multiple},get disabled(){return t.disabled},pickOption:m,isOptionFocused:Q,isOptionDisabled:t.isOptionDisabled,onFocusIn:J,onFocusOut:x,onMouseDown:O,onClick:G,onInput:q,onKeyDown:N}},Y={NO_MATCH:0,MATCH:1,WORD_START:2,START:3},kt=(l,t)=>{let n=Y.NO_MATCH,a=[];if(l.length<=t.length){const r=Array.from(l.toLocaleLowerCase()),o=Array.from(t.toLocaleLowerCase());let u=Y.START;e:for(let s=0,c=0;s<r.length;s++){for(;c<o.length;)if(o[c]===r[s]){a[c]=!0,u===Y.MATCH&&o[c-1]===" "&&o[c]!==" "&&(u=Y.WORD_START),n+=u,u++,c++;continue e}else u=Y.MATCH,c++;n=Y.NO_MATCH,a.length=0}}return{target:t,score:n,matches:a}},Rt=(l,t=n=>(()=>{var a=gt();return e.insert(a,n),a})())=>{const n=l.target,a=l.matches,r="\0",o=[];let u=!1;for(let s=0;s<n.length;s++){const c=n[s],f=a[s];!u&&f?(o.push(r),u=!0):u&&!f&&(o.push(r),u=!1),o.push(c)}return u&&(o.push(r),u=!1),e.memo(()=>o.join("").split(r).map((s,c)=>c%2?t(s):s))},Tt=(l,t,n)=>{const a=[];for(let r=0;r<t.length;r++){const o=t[r],u=o[n],s=kt(l,u);s.score&&a.push({...s,item:o,index:r})}return a.sort((r,o)=>{let u=o.score-r.score;return u===0&&(u=r.index-o.index),u}),a},It=(l,t,n)=>t==="label"?[e.memo(()=>n.prefix),e.memo(()=>n.highlight??l)]:l,fe=(l,t)=>{const n=Object.assign({extractText:c=>c.toString?c.toString():c,filterable:!0,disable:()=>!1},t||{});n.key&&t&&(t.format||t.disable||t.extractText),typeof n.createable=="function"&&n.createable.length;const a=c=>n.key?c[n.key]:c,r=c=>n.extractText(a(c)),o=(c,f,d)=>{const v=a(c);return n.format?n.format(v,f,d):It(v,f,d)},u=c=>n.disable(a(c));return{options:c=>{let d=(typeof l=="function"?l(c):l).map(v=>({value:v,label:o(v,"label",{}),text:r(v),disabled:u(v)}));if(n.filterable&&c&&(typeof n.filterable=="function"?d=n.filterable(c,d):d=Tt(c,d,"text").map(v=>({...v.item,label:o(v.item.value,"label",{highlight:Rt(v)})}))),n.createable!==void 0){const v=c.trim(),y=d.some($=>Ft(c,$.text));if(v){let $;if(typeof n.createable=="function"?n.createable.length===1&&y||($=n.createable(v,y,d)):y||($=n.key?{[n.key]:v}:v),$!==void 0){const C=Array.isArray($)?$:[$],m=[];for(const _ of C)m.push({value:_,label:o(_,"label",{prefix:"Create "}),text:r(_),disabled:!1});d=[...d,...m]}}}return d},optionToValue:c=>c.value,isOptionDisabled:c=>c.disabled,format:(c,f)=>f==="option"?c.label:o(c,"value",{})}},Ft=(l,t)=>l.localeCompare(t,void 0,{sensitivity:"base"})===0,Se=i.createContext(),b=()=>{const l=i.useContext(Se);if(!l)throw new Error("No SelectContext found in ancestry.");return l},ae=l=>{const[t,n]=i.splitProps(i.mergeProps({format:(r,o)=>r,placeholder:"Select...",readonly:typeof l.options!="function",loading:!1,loadingPlaceholder:"Loading...",emptyPlaceholder:"No options"},l),["options","optionToValue","isOptionDisabled","multiple","disabled","onInput","onChange"]),a=Pt(t);return i.createEffect(i.on(()=>n.initialValue,r=>r!==void 0&&a.setValue(r))),e.createComponent(Se.Provider,{value:a,get children(){return e.createComponent(Lt,{get class(){return n.class},get children(){return[e.createComponent(At,{get id(){return n.id},get name(){return n.name},get format(){return n.format},get placeholder(){return n.placeholder},get autofocus(){return n.autofocus},get readonly(){return n.readonly},ref(r){var o=l.ref;typeof o=="function"?o(r):l.ref=r}}),e.createComponent(Nt,{get loading(){return n.loading},get loadingPlaceholder(){return n.loadingPlaceholder},get emptyPlaceholder(){return n.emptyPlaceholder},get format(){return n.format}})]}})}})},Lt=l=>{const t=b();return(()=>{var n=ht();return n.$$mousedown=a=>{t.onMouseDown(a),a.currentTarget.getElementsByTagName("input")[0].focus()},e.addEventListener(n,"focusout",t.onFocusOut,!0),e.addEventListener(n,"focusin",t.onFocusIn,!0),e.insert(n,()=>l.children),e.effect(a=>{var r=`solid-select-container ${l.class!==void 0?l.class:""}`,o=t.disabled;return r!==a.e&&e.className(n,a.e=r),o!==a.t&&e.setAttribute(n,"data-disabled",a.t=o),a},{e:void 0,t:void 0}),n})()},At=l=>{const t=b(),n=a=>{const r=t.value();t.setValue([...r.slice(0,a),...r.slice(a+1)])};return(()=>{var a=vt();return e.addEventListener(a,"click",t.onClick,!0),e.insert(a,e.createComponent(i.Show,{get when(){return e.memo(()=>!t.hasValue())()&&!t.hasInputValue()},get children(){return e.createComponent(Et,{get children(){return l.placeholder}})}}),null),e.insert(a,e.createComponent(i.Show,{get when(){return e.memo(()=>!!(t.hasValue()&&!t.multiple))()&&!t.hasInputValue()},get children(){return e.createComponent(Ot,{get children(){return l.format(t.value(),"value")}})}}),null),e.insert(a,e.createComponent(i.Show,{get when(){return t.hasValue()&&t.multiple},get children(){return e.createComponent(i.For,{get each(){return t.value()},children:(r,o)=>e.createComponent(Vt,{onRemove:()=>n(o()),get children(){return l.format(r,"value")}})})}}),null),e.insert(a,e.createComponent(Dt,{get id(){return l.id},get name(){return l.name},get autofocus(){return l.autofocus},get readonly(){return l.readonly},ref(r){var o=l.ref;typeof o=="function"?o(r):l.ref=r}}),null),e.effect(r=>{var o=t.multiple,u=t.hasValue(),s=t.disabled;return o!==r.e&&e.setAttribute(a,"data-multiple",r.e=o),u!==r.t&&e.setAttribute(a,"data-has-value",r.t=u),s!==r.a&&e.setAttribute(a,"data-disabled",r.a=s),r},{e:void 0,t:void 0,a:void 0}),a})()},Et=l=>(()=>{var t=St();return e.insert(t,()=>l.children),t})(),Ot=l=>(()=>{var t=Ct();return e.insert(t,()=>l.children),t})(),Vt=l=>(b(),(()=>{var t=$t(),n=t.firstChild,a=n.nextSibling;return e.insert(n,()=>l.children),a.$$click=r=>{r.stopPropagation(),l.onRemove()},t})()),Dt=l=>{const t=b();return(()=>{var n=_t();n.$$mousedown=r=>{r.stopPropagation()},n.$$keydown=r=>{t.onKeyDown(r),r.defaultPrevented||r.key==="Escape"&&(r.preventDefault(),r.stopPropagation(),r.target.blur())},e.addEventListener(n,"input",t.onInput,!0);var a=l.ref;return typeof a=="function"?e.use(a,n):l.ref=n,e.effect(r=>{var o=l.id,u=l.name,s=t.multiple,c=t.isActive(),f=l.autofocus,d=l.readonly,v=t.disabled;return o!==r.e&&e.setAttribute(n,"id",r.e=o),u!==r.t&&e.setAttribute(n,"name",r.t=u),s!==r.a&&e.setAttribute(n,"data-multiple",r.a=s),c!==r.o&&e.setAttribute(n,"data-is-active",r.o=c),f!==r.i&&(n.autofocus=r.i=f),d!==r.n&&(n.readOnly=r.n=d),v!==r.s&&(n.disabled=r.s=v),r},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),e.effect(()=>n.value=t.inputValue()),n})()},Nt=l=>{const t=b();return e.createComponent(i.Show,{get when(){return t.isOpen()},get children(){var n=yt();return e.insert(n,e.createComponent(i.Show,{get when(){return!l.loading},get fallback(){return(()=>{var a=ve();return e.insert(a,()=>l.loadingPlaceholder),a})()},get children(){return e.createComponent(i.For,{get each(){return t.options()},get fallback(){return(()=>{var a=ve();return e.insert(a,()=>l.emptyPlaceholder),a})()},children:a=>e.createComponent(jt,{option:a,get children(){return l.format(a,"option")}})})}})),n}})},jt=l=>{const t=b(),n=a=>{i.createEffect(()=>{t.isOptionFocused(l.option)&&a.scrollIntoView({block:"nearest"})})};return(()=>{var a=xt();return a.$$click=()=>t.pickOption(l.option),e.use(n,a),e.insert(a,()=>l.children),e.effect(r=>{var o=t.isOptionDisabled(l.option),u=t.isOptionFocused(l.option);return o!==r.e&&e.setAttribute(a,"data-disabled",r.e=o),u!==r.t&&e.setAttribute(a,"data-focused",r.t=u),r},{e:void 0,t:void 0}),a})()};e.delegateEvents(["focusin","focusout","mousedown","click","input","keydown"]);var Bt=e.template("<h1>"),ie=e.template("<button>"),Mt=e.template("<div class=StacCard id=StacRoot><div class=StacHeader><div class=StacNavigationSelector>"),ne=e.template("<p>"),Gt=e.template("<div>"),qt=e.template('<div class><div><button></button><button></button><button></button><input type=datetime-local placeholder=Datetime step=1><input placeholder="Bbox: minx, miny, maxx, maxy">'),zt=e.template("<p class=StacErrorText>"),Ht=e.template("<div class=StacSearchResults>"),pe=e.template("<span>"),Kt=e.template("<div class=StacSearchPagingButtons>"),Ut=e.template("<div class=StacFeatureCollection>"),Wt=e.template("<div class=StacFeature><div><p></p><p></p><div><button>"),Zt=e.template("<img class=stacFeatureThumbnail crossorigin=anonymous>"),Qt=e.template("<div><label><input type=text></label><label><input type=text>"),Xt=e.template("<div><button>"),Yt=e.template("<textarea>"),bt=e.template("<div class=dialog-backdrop><div class=dialog-content><div><label><input type=radio value=none></label><label><input type=radio value=point></label><label><input type=radio value=polygon></label><label><input type=radio value=custom></label></div></div><div><div><button>Cancel</button><button>Save"),Jt=e.template("<div><label>Lat:<input type=text></label><label>Lon:<input type=text>");function wt(l){const{url:t,selectCallback:n}=l,[a]=i.createResource(()=>t,xe),{setCallback:r}=le();r(()=>n);const[o,u]=i.createSignal("collections");return(()=>{var s=Mt(),c=s.firstChild,f=c.firstChild;return e.insert(c,e.createComponent(i.Suspense,{get fallback(){return(()=>{var d=ne();return e.insert(d,Fe),d})()},get children(){var d=Bt();return e.insert(d,a),d}}),f),e.insert(f,e.createComponent(i.Show,{get when(){return o()==="collections"},get children(){var d=ie();return d.$$click=()=>u("search"),e.insert(d,ge),d}}),null),e.insert(f,e.createComponent(i.Show,{get when(){return o()==="search"},get children(){var d=ie();return d.$$click=()=>u("collections"),e.insert(d,Re),d}}),null),e.insert(s,e.createComponent(i.Show,{get when(){return o()==="search"},get children(){return e.createComponent(en,{url:t})}}),null),e.insert(s,e.createComponent(i.Show,{get when(){return o()==="collections"},get children(){return e.createComponent(dt,{url:t})}}),null),s})()}function en(l){const{url:t}=l,n=`${t}/search`,[a,r]=i.createSignal("",{equals:!1}),{collections:o,bbox:u,setBbox:s,intersects:c,setIntersects:f,datetime:d,setDatetime:v}=le(),y=fe(o().map(P=>P.id)),$=fe([],{createable:!0}),[C,m]=i.createSignal([]),[_,T]=i.createSignal([]),[S,k]=i.createSignal(1e3),[L,E]=i.createSignal(""),[M,A]=i.createSignal(""),[Q,H]=i.createSignal(!1),[R,{refetch:K}]=i.createResource(a,p);f("");const[J,x]=i.createSignal(!1),[O,G]=i.createSignal(""),[q,N]=i.createSignal("");async function p(P){if(P.trim()===""){H(!1);return}H(!0);const g=new URL(P),I={collections:C().join(","),limit:S()};if(_().length>0&&(I.ids=_().join(",")),u()){if(!rn(u())){N("StacSearchErrorInput");return}N(""),I.bbox=u()}d()&&(I.datetime=d()+":00Z");const W={};let D;c()&&(D=c()!==""?c():void 0,D!=null&&(W.intersects=JSON.parse(D))),Object.entries(I).forEach(([B,se])=>{g.searchParams.append(B,se)});let Z;D!=null&&D.trim()!==""?Z=await fetch(g,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(W)}):Z=await fetch(g,{method:"GET"});const X=await Z.json(),re=X.links.find(B=>B.rel==="next"),F=X.links.find(B=>B.rel==="previous");return re?.href?A(re.href):A(""),F?.href?E(F.href):E(""),X}const[V,w]=i.createSignal(null),[j,oe]=i.createSignal(he());i.createEffect(()=>{V()===null||V()?.trim()===""?oe(he()):oe(tt()+V())});const ce=P=>{w(P),x(!1),f(P??"")};async function ee(P){r(P),await K()}let U,te;return i.createEffect(()=>{J()&&U&&te?(te.style.display="block",U.style.display="none",U.focus()):U&&te&&(U.style.display="grid",te.style.display="none",U.focus())}),[(()=>{var P=qt(),g=P.firstChild,I=g.firstChild,W=I.nextSibling,D=W.nextSibling,Z=D.nextSibling,X=Z.nextSibling,re=U;return typeof re=="function"?e.use(re,g):U=g,g.style.setProperty("display","grid"),g.style.setProperty("grid-template-columns","35% 15% 30% 9% 9%"),g.style.setProperty("gap","0.25em"),e.insert(g,e.createComponent(ae,e.mergeProps({get placeholder(){return Oe()},onChange:m,multiple:!0},y)),I),e.insert(g,e.createComponent(ae,{get placeholder(){return Ve()},onChange:k,options:[10,50,100,250,500,1e3,2e3]}),I),e.insert(g,e.createComponent(ae,e.mergeProps({get placeholder(){return De()},onChange:T,multiple:!0},$)),I),I.$$click=()=>{r(n),K(n)},I.style.setProperty("grid-row","1/3"),I.style.setProperty("grid-column","4"),e.insert(I,ge),W.$$click=()=>{A(""),E(""),H(!1),r("")},W.style.setProperty("grid-row","1/3"),W.style.setProperty("grid-column","5"),e.insert(W,Be),D.$$click=()=>x(!0),D.style.setProperty("white-space","nowrap"),D.style.setProperty("overflow-x","clip"),D.style.setProperty("text-overflow","ellipses"),e.insert(D,j),Z.addEventListener("change",F=>{v(F.currentTarget.value)}),X.addEventListener("change",F=>s(F.currentTarget.value)),e.insert(P,e.createComponent(i.Show,{get when(){return J()},get children(){var F=Gt(),B=te;return typeof B=="function"?e.use(B,F):te=F,e.insert(F,e.createComponent(ln,{onClose:()=>x(!1),onSave:ce})),F}}),null),e.effect(F=>{var B=j(),se=`StacDatetimeInput ${O()}`,$e=`StacBboxInput ${q()}`;return B!==F.e&&e.setAttribute(D,"title",F.e=B),se!==F.t&&e.className(Z,F.t=se),$e!==F.a&&e.className(X,F.a=$e),F},{e:void 0,t:void 0,a:void 0}),e.effect(()=>Z.value=d()?d():""),e.effect(()=>X.value=u()?u():""),P})(),(()=>{var P=Ht();return e.insert(P,e.createComponent(i.Show,{get when(){return R.loading},get children(){var g=ne();return e.insert(g,Ne),g}}),null),e.insert(P,e.createComponent(i.Show,{get when(){return R.error},get children(){var g=zt();return e.insert(g,je),g}}),null),e.insert(P,e.createComponent(i.Show,{get when(){return e.memo(()=>!!(Q()&&!R.loading&&!R.error))()&&R()},get children(){return e.createComponent(tn,{get searchResults(){return R()}})}}),null),P})(),(()=>{var P=Kt();return e.insert(P,e.createComponent(i.Show,{get when(){return L().trim().length>0},get children(){var g=ie();return g.$$click=()=>{ee(L())},e.insert(g,Me),g}}),null),e.insert(P,e.createComponent(i.Show,{get when(){return e.memo(()=>!!(Q()&&!R.loading&&!R.error))()&&R()},get children(){return[(()=>{var g=pe();return e.insert(g,qe,null),e.insert(g,(()=>{var I=e.memo(()=>!!R().context);return()=>I()?R().context.returned:ue()})(),null),g})(),(()=>{var g=pe();return e.insert(g,ze,null),e.insert(g,(()=>{var I=e.memo(()=>!!R().context);return()=>I()?R().context.limit:ue()})(),null),g})(),(()=>{var g=pe();return e.insert(g,He,null),e.insert(g,(()=>{var I=e.memo(()=>!!R().context);return()=>I()?R().context.matched:ue()})(),null),g})()]}}),null),e.insert(P,e.createComponent(i.Show,{get when(){return M().trim().length>0},get children(){var g=ie();return g.$$click=()=>{ee(M())},e.insert(g,Ge),g}}),null),P})()]}function tn(l){const{searchResults:t}=l;return e.createComponent(nn,{featureCollection:t})}function nn(l){const{featureCollection:t}=l;return(()=>{var n=Ut();return e.insert(n,e.createComponent(i.For,{get each(){return t.features},children:a=>e.createComponent(Ce,{feature:a})})),n})()}function Ce(l){const{feature:t}=l,{callback:n}=le();function a(c){n()({asset:r(),feature:t})}const[r,o]=i.createSignal(""),u=Object.entries(t.assets).map(([c,f])=>({name:c,value:f})).filter(c=>c.name!=="thumbnail"),s=fe(u,{key:"name"});return(()=>{var c=Wt(),f=c.firstChild,d=f.firstChild,v=d.nextSibling,y=v.nextSibling,$=y.firstChild;return e.insert(c,(()=>{var C=e.memo(()=>!!t.assets.thumbnail?.href);return()=>C()?(()=>{var m=Zt();return e.effect(_=>{var T=t.assets.thumbnail.href,S=t.assets.thumbnail.title?t.assets.thumbnail.title:Ke();return T!==_.e&&e.setAttribute(m,"src",_.e=T),S!==_.t&&e.setAttribute(m,"alt",_.t=S),_},{e:void 0,t:void 0}),m})():(()=>{var m=ne();return e.insert(m,Ue),m})()})(),f),f.style.setProperty("padding","0.5rem"),e.insert(d,()=>de()+t.id),e.insert(v,()=>We()+t.bbox.join(", ")),e.insert(f,e.createComponent(i.Show,{get when(){return t.properties.datetime},get children(){var C=ne();return e.insert(C,(()=>{var m=e.memo(()=>!!t.properties.datetime);return()=>m()?Ze()+t.properties.datetime:""})()),C}}),y),e.insert(f,e.createComponent(i.Show,{get when(){return t.properties.created},get children(){var C=ne();return e.insert(C,(()=>{var m=e.memo(()=>!!t.properties.created);return()=>m()?Qe()+t.properties.created:""})()),C}}),y),y.style.setProperty("display","grid"),y.style.setProperty("grid-template-columns","75% 25%"),e.insert(y,e.createComponent(ae,e.mergeProps(s,{get placeholder(){return Ae()},onChange:C=>{o(C.value)}})),$),$.$$click=a,e.insert($,Ee),c})()}function rn(l){const t=l.split(",").map(s=>parseFloat(s));if(t.length!==4||t.some(s=>isNaN(s)))return!1;const[n,a,r,o]=t;return!(n<-180||n>180||r<-180||r>180||a<-90||a>90||o<-90||o>90||n>r||a>o)}function ln(l){const[t,n]=i.createSignal("none"),[a,r]=i.createSignal(""),[o,u]=i.createSignal(""),[s,c]=i.createSignal([{lat:"",lon:""}]),[f,d]=i.createSignal();function v(){c([...s(),{lat:"",lon:""}])}function y(C,m,_){c(T=>{const S=[...T];return S[C]={...S[C],[m]:_},S})}function $(){let C=null;if(t()==="point"){const m=parseFloat(a()),_=parseFloat(o());!isNaN(m)&&!isNaN(_)&&(C={type:"Point",coordinates:[_,m]})}else if(t()==="polygon"){const m=s().map(_=>[parseFloat(_.lon),parseFloat(_.lat)]);m.length>=3&&(m.push(m[0]),C={type:"Polygon",coordinates:[m]})}else t()=="custom"&&f()!==void 0&&f()?.trim()!==""&&(C=JSON.parse(f()));l.onSave(C?JSON.stringify(C):null)}return(()=>{var C=bt(),m=C.firstChild,_=m.firstChild,T=_.firstChild,S=T.firstChild,k=T.nextSibling,L=k.firstChild,E=k.nextSibling,M=E.firstChild,A=E.nextSibling,Q=A.firstChild,H=m.nextSibling,R=H.firstChild,K=R.firstChild,J=K.nextSibling;return _.style.setProperty("display","grid"),S.addEventListener("change",x=>n(x.currentTarget.value)),e.insert(T,Xe,null),L.addEventListener("change",x=>n(x.currentTarget.value)),e.insert(k,Ye,null),M.addEventListener("change",x=>n(x.currentTarget.value)),e.insert(E,be,null),Q.addEventListener("change",x=>n(x.currentTarget.value)),e.insert(A,nt,null),e.insert(m,e.createComponent(i.Switch,{fallback:[],get children(){return[e.createComponent(i.Match,{get when(){return t()==="point"},get children(){var x=Qt(),O=x.firstChild,G=O.firstChild,q=O.nextSibling,N=q.firstChild;return e.insert(O,Je,G),G.addEventListener("change",p=>r(p.currentTarget.value)),e.insert(q,we,N),N.addEventListener("change",p=>u(p.currentTarget.value)),e.effect(()=>G.value=a()),e.effect(()=>N.value=o()),x}}),e.createComponent(i.Match,{get when(){return t()==="polygon"},get children(){var x=Xt(),O=x.firstChild;return e.insert(x,e.createComponent(i.For,{get each(){return s()},children:(G,q)=>(()=>{var N=Jt(),p=N.firstChild,V=p.firstChild,w=V.nextSibling,j=p.nextSibling,oe=j.firstChild,ce=oe.nextSibling;return N.style.setProperty("margin-bottom","4px"),w.addEventListener("change",ee=>{y(q(),"lat",ee.currentTarget.value)}),j.style.setProperty("margin-left","8px"),ce.addEventListener("change",ee=>{y(q(),"lon",ee.currentTarget.value)}),e.effect(()=>w.value=G.lat),e.effect(()=>ce.value=G.lon),N})()}),O),O.$$click=v,e.insert(O,et),x}}),e.createComponent(i.Match,{get when(){return t()==="custom"},get children(){var x=Yt();return x.addEventListener("change",O=>{d(O.currentTarget.value)}),e.effect(()=>e.setAttribute(x,"placeholder",rt())),x}})]}}),null),R.style.setProperty("margin-top","16px"),e.addEventListener(K,"click",l.onClose,!0),J.$$click=$,e.effect(()=>S.checked=t()==="none"),e.effect(()=>L.checked=t()==="point"),e.effect(()=>M.checked=t()==="polygon"),e.effect(()=>Q.checked=t()==="custom"),C})()}e.delegateEvents(["click"]);function an(l){const{url:t,selectCallback:n,bboxSignal:a,intersectsSignal:r,datetimeSignal:o}=l;return e.createComponent(ye,{bboxSignal:a,intersectsSignal:r,datetimeSignal:o,get children(){return e.createComponent(wt,{url:t,selectCallback:n})}})}z.Stac=an,Object.defineProperty(z,Symbol.toStringTag,{value:"Module"})});
