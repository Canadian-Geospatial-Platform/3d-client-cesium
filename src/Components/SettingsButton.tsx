import { createEffect, createSignal, JSX, Show } from "solid-js";
import { SettingsMenu } from "./SettingsMenu";

export function SettingsButton(): JSX.Element {
    const [settingsMenuShown, setSettingsMenuShown] = createSignal(false);
    const [settingChanged, setSettingChanged] = createSignal(false);

    createEffect(() => {
        if (!settingsMenuShown() && settingChanged()) {
            location.reload();
        }
    });

    const settingsSvg = (
        <svg width="24" height="24" xmlns="http://www.w3.org/2000/svg" fill="#FFFFFF" version="1.1">
            <g>
                <path d="m22.45159,9.61559l-1.24441,0c-0.23132,-0.9269 -0.59233,-1.79501 -1.06313,-2.58912l0.89463,-0.92165c0.24153,-0.24826 0.37429,-0.57945 0.37429,-0.9311c0,-0.35113 -0.13378,-0.68284 -0.37429,-0.93057l-1.49104,-1.53101c-0.48357,-0.49756 -1.32866,-0.49704 -1.81019,-0.00052l-0.93242,0.95262c-0.7639,-0.45768 -1.58295,-0.81038 -2.48524,-1.03712l0,-1.36883c0,-0.72588 -0.56424,-1.32264 -1.27045,-1.32264l-2.10788,0c-0.7062,0 -1.26177,0.59676 -1.26177,1.32264l0,1.3683c-0.90178,0.22621 -1.72594,0.57945 -2.49086,1.03764l-0.9319,-0.95262c-0.48305,-0.49756 -1.32866,-0.49704 -1.81325,-0.00052l-1.49002,1.53101c-0.23897,0.24511 -0.37531,0.58416 -0.37531,0.93057c0,0.35113 0.13225,0.68179 0.37429,0.93005l0.89463,0.92375c-0.47029,0.79411 -0.83181,1.66223 -1.06263,2.58912l-1.24491,0c-0.70671,0 -1.27709,0.58364 -1.27709,1.30794l0,2.16504c0,0.7264 0.57037,1.29692 1.27709,1.29692l1.24491,0c0.2308,0.9269 0.59182,1.80026 1.06161,2.59437l-0.89463,0.92532c-0.24204,0.24826 -0.37481,0.58049 -0.37481,0.93214s0.13327,0.68389 0.37481,0.93214l1.49104,1.53206c0.24204,0.24826 0.56322,0.38472 0.90484,0.38472s0.66331,-0.13699 0.90535,-0.38472l0.93599,-0.95314c0.76492,0.4582 1.58908,0.8109 2.49086,1.03817l0,1.36673c0,0.72588 0.55557,1.3111 1.26177,1.3111l2.10788,0c0.7062,0 1.27045,-0.58522 1.27045,-1.3111l0,-1.36726c0.90228,-0.22674 1.72133,-0.57945 2.48626,-1.03764l0.92782,0.95104c0.24204,0.2493 0.56374,0.38577 0.90637,0.38577c0.34213,0 0.66433,-0.13699 0.90586,-0.38472l1.49104,-1.53101c0.24153,-0.24773 0.37379,-0.57892 0.37481,-0.93005c0,-0.35165 -0.13378,-0.68179 -0.37481,-0.93057l-0.89361,-0.92899c0.46978,-0.79463 0.83079,-1.66853 1.06211,-2.59437l1.24491,0c0.7062,0 1.28679,-0.57052 1.28679,-1.29692l0,-2.16504c0.00051,-0.7243 -0.57956,-1.30794 -1.28577,-1.30794l0.00001,0.00002zm-10.45669,6.51191c-2.23554,0 -4.04828,-1.84593 -4.04828,-4.12118c0,-2.27684 1.81274,-4.12013 4.04828,-4.12013c2.23605,0 4.04981,1.8433 4.04981,4.12013c-0.00051,2.27578 -1.81376,4.12118 -4.04981,4.12118z" />
            </g>
        </svg>
    );

    return (
        <div class="settings-button-div">
            <Show when={settingsMenuShown()}>
                <SettingsMenu setSettingsMenuShown={setSettingsMenuShown} settingChanged={setSettingChanged} />
            </Show>
            <button
                class="settings-button cesium-button"
                type="button"
                onClick={() => {
                    setSettingsMenuShown(true);
                }}
            >
                {settingsSvg}
            </button>
        </div>
    );
}
